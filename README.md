# DemoBlaze-automated-SmokeTest
Proof of concept automated smoke tests for the website `https://www.demoblaze.com`. These sets of tests ensures that the main and basic functionality of the website is met and different tabs, buttons, and form registerations behave as expected. While there's a lot of room for improvement incuding test case expansion, CI pipeline optimization, utilization of dedicated report generation tools, and CI pipeline run data analysis this POC smoke test showcases the power of automated tests in easing the testing process for websites across multiple browsers. 

## **Features**

- Utilizes Playwright test framework for fast, reliable browser automation.
- Multi browser paralel test runs.
- Supports both local and containerized test execution.
- Configurable base URL for flexible environment targeting.
- Dockerized setup with HTML report server exposed on port 9323.
- CI integration via GitHub Actions with artifact publishing.
- Modular test structure with page object model for maintainability.
- Includes robust handling for modal interactions and flaky UI elements.

---

## **Requirements**

- Node.js must be installed on the machine that runs this test.  
  You can install Node.js via command line. For installation instructions, see [**Node.js official website**](https://nodejs.org/en/download)

- Docker and Docker Compose (for containerized runs).  
  See [**Docker installation guide**](https://docs.docker.com/get-docker/) for setup instructions.

---

## **Inputs**

### **`Base URL`**
- **Description**: URL to the website that is to be tested.  
- **Required**: No.  
- **Type**: String.

Provide the URL to, for instance, `https://www.amazon.co.uk` to overwrite the default `https://www.demoblaze.com`.

### **`LOCAL_RUN`**
- **Description**: Local run variable determines if report should be served on port 9323 or if the report can be mapped via valume mapping to the host machine.  
- **Required**: No.  
- **Type**: String.

Decide how to get the report. It is recomanded to run local runs with  ```LOCAL_RUN=True``` to view the report easily from localhost port 9323.

---

## **Outputs**

### **`Test results`**
- **Description**: Result of tests ran on different browsers.
- **Format**: HTML report generated by Playwright.
- **Location**:
  - Locally: `playwright-report/` also serverd on `http://localhost:9323`
  - Docker: Accessible via `http://localhost:9323`
  - GitHub Actions: Published as downloadable artifact

---

## **Environments to Run**

- ✅ **Local machine**  
  Run tests headlessly or in headed mode using Playwright CLI.

- ✅ **Docker container**  
  Run tests in a containerized environment. HTML report is served on port 9323.

- ✅ **GitHub Actions**  
  CI pipeline runs tests on every push and pull request to `main`. Test results are uploaded as artifacts. CI pipeline can also be triggered manually.

---

## **Usage**

### 🔧 Local Run

Clone the repo and install dependencies:

```bash
npm install
npx playwright install --with-deps
```
Run tests (headed mode):

```bash
npx playwright test --headed
```
Run tests (headless mode):

```bash
npx playwright test
```
Open HTML report after local run:

```bash
npx playwright show-report
```
Override base URL:

```bash
BASE_URL="https://www.amazon.co.uk/" npx playwright test
```
## **🐳 Docker Run**
Build and run the container:

```bash
docker compose up --build
```
View the report in your browser:

```Code
http://localhost:9323
```
To stop the container:

```bash
Ctrl+C
```
## **🚀 GitHub Actions CI**
Tests run automatically on:

- **Push to main**

- **Pull request to main**

- **Manual trigger via workflow dispatch**

### Artifacts:

- **HTML report is uploaded and retained for 30 days.**

## **Project Structure**

```Code
.
├── tests/
│   ├── specs/              # Test suites organized by feature
│   ├── pages/              # Page object models
│   └── utils/              # Shared utilities
├── playwright.config.ts    # Playwright configuration
├── docker-compose.yml      # Docker setup for local runs
├── docker-compose.ci.yml   # Docker setup for CI runs
├── Dockerfile              # Container definition
├── run-tests.sh            # Entrypoint script for container
└── .github/workflows/      # CI pipeline
```

## **Issues**
If you encounter flaky tests or modal-related failures in CI, refer to the modal handling logic in NavBar.ts and ContactPage.ts. These have been hardened to work reliably in headless environments.

## **Roadmap**
This project is a proof of concept for smoke testing with Playwright. Future enhancements may include:

✅ GitHub annotations for inline test warnings and errors.

✅ Report migration to a dedicated reporting tool like Grafana or Alure where meta data of builds can also be analized.

✅ CI Nigthly or weekly runs triggered by events like weekly release.

✅ Slack or Teams integration for alerting on critical failures.

✅ Auto-publish HTML reports to GitHub Pages.
